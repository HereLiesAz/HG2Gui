name: Jules Agent

on:
  issues:
    types: [opened]

jobs:
  jules-triage:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      issues: write
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Invoke Jules
        uses: google-labs-code/jules-invoke@v1
        with:
          jules_api_key: ${{ secrets.JULES_API_KEY }}
          prompt: |
            You are Jules, an AI software engineer. You have been assigned to issue #${{ github.event.issue.number }}: '${{ github.event.issue.title }}'.

            Issue Description:
            ${{ github.event.issue.body }}

            Please analyze the codebase, implement the requested changes or fix the reported bug.
            Run all necessary tests to verify your work.

            When you are confident in your solution, submit your changes.
            Ensure the issue is closed when complete (e.g., by referencing "Closes #${{ github.event.issue.number }}" in your Pull Request description or by using a tool if available).
